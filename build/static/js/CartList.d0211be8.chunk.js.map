{"version":3,"file":"static/js/CartList.d0211be8.chunk.js","mappings":"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","sources":["components/cart/index.tsx","webpack://cart_shop/./src/components/ErrorBeckend/ErrorBeckend.module.scss?3e12","components/ErrorBeckend/index.tsx","containers/CartList.tsx"],"sourcesContent":["import './Cart.scss';\r\n\r\ntype CartProps = {\r\n  articul: string;\r\n  title: string;\r\n  image: string;\r\n  currency: string;\r\n  quantity: number;\r\n  priceAllItem: string | number;\r\n  cost: string | number;\r\n};\r\n\r\nconst Cart: React.FC<CartProps> = (props) => {\r\n  return (\r\n    <div className=\" cart__one-product\">\r\n      <table>\r\n        <tbody>\r\n          <tr className=\"cart__goods-list\">\r\n            <td>Name good</td>\r\n            <td>Price for one item</td>\r\n            <td>Quantity</td>\r\n            <td>Price all item</td>\r\n          </tr>\r\n          <tr className=\"cart__goods\">\r\n            <td className=\"cart__goods-name\">\r\n              <h2 className=\"cart__goods-title\">{props.title}</h2>\r\n              <img\r\n                className=\"cart__image-table-td\"\r\n                src={props.image}\r\n                alt={props.title}\r\n              />\r\n            </td>\r\n            <td className=\"cart__goods-price-one\">\r\n              {props.cost} {props.currency}\r\n            </td>\r\n            <td className=\"cart__goods-quantity\">{props.quantity}</td>\r\n            <td className=\"cart__goods-price-all\">{props.priceAllItem}</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n      <div className=\"cart__btn-block\">\r\n        <button\r\n          className=\"cart__delete-one-position delete-one-position btn\"\r\n          data-key={props.articul}>\r\n          Delete one position\r\n        </button>\r\n        <button\r\n          className=\"cart__delete-quantity delete-quantity btn\"\r\n          data-key={props.articul}>\r\n          Delete quantity\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"ErrorBeckend_root__F2ACB\"};","import { useDispatch } from 'react-redux';\r\n\r\nimport style from './ErrorBeckend.module.scss';\r\n\r\nimport { clearCart } from '../../store/cartSlice';\r\n\r\nconst ErrorBeckend: React.FC = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  return (\r\n    <>\r\n      <div></div>\r\n      <div className={style.root}>\r\n        <h1>Ой... Мы не можем отобразить товар.</h1>\r\n        <br />\r\n        <p>\r\n          Ошибка бекенда. Наша серверная часть не может отправить список\r\n          корзины.\r\n        </p>\r\n        <br />\r\n\r\n        <p>\r\n          Внимание! Для отображения корзины сначала выберите все фильры, потом\r\n          добавляйте товар в корзину.\r\n        </p>\r\n        <br></br>\r\n        <button\r\n          className=\"btn\"\r\n          onClick={() => {\r\n            dispatch(clearCart());\r\n          }}>\r\n          Очистить корзину и создать новую\r\n        </button>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ErrorBeckend;\r\n","import React, {\r\n  LegacyRef,\r\n  forwardRef,\r\n  useContext,\r\n  useEffect,\r\n  useRef,\r\n} from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport {\r\n  fullQuantityGoods,\r\n  fullQuantity,\r\n  selectCostFlag,\r\n  selectCurrensy,\r\n} from '../store/goodsSlice';\r\nimport {\r\n  selectCart,\r\n  minus,\r\n  del,\r\n  cartOpen,\r\n  selectCartOpenSt,\r\n  CartItem,\r\n  selectCartOpenErrorSt,\r\n  clearCart,\r\n} from '../store/cartSlice';\r\nimport { itemsReindexing } from '../store/furnitureSlice';\r\n\r\nimport Cart from '../components/cart';\r\nimport ErrorBeckend from '../components/ErrorBeckend';\r\nimport { useAppDispatch } from '../store';\r\nimport { iconCartContext } from '../app/App';\r\n\r\nconst CartList: React.FC = () => {\r\n  const dispath = useAppDispatch();\r\n  const selCartOpenSt: boolean = useSelector(selectCartOpenSt);\r\n  const selCartOpenErrorSt: boolean = useSelector(selectCartOpenErrorSt);\r\n  const selCostFlag: boolean = useSelector(selectCostFlag);\r\n  const currency: string = useSelector(selectCurrensy);\r\n  const goodsReindex: any = useSelector(itemsReindexing);\r\n  const cart: CartItem = useSelector(selectCart);\r\n\r\n  const catCartRef: React.MutableRefObject<null> = useRef(null);\r\n  const iconCartRef: React.MutableRefObject<null> | null =\r\n    useContext(iconCartContext);\r\n\r\n  let fullQuantityGoodsCart: number = useSelector(fullQuantityGoods);\r\n\r\n  // fullPrice ----------------------------------------------------------\r\n  const fullPrice = (): number => {\r\n    const fullPriceArr: number[] = Object.keys(cart).map((el) => {\r\n      const priceInObj: number = goodsReindex[el].cost;\r\n\r\n      let price: number = 0;\r\n      return (price += (Number(\r\n        !selCostFlag && goodsReindex ? priceInObj : priceInObj / 95\r\n      ) * cart[el]) as number);\r\n    });\r\n\r\n    let sum: number = 0;\r\n    for (let i = 0; i < fullPriceArr.length; i++) {\r\n      sum += fullPriceArr[i];\r\n    }\r\n    return sum;\r\n  };\r\n\r\n  //=========================================================\r\n  useEffect(() => {\r\n    if (fullQuantityGoodsCart !== undefined) {\r\n      dispath(\r\n        fullQuantity(\r\n          Object.values(cart).reduce((a: number, b: number) => a + b, 0)\r\n        )\r\n      );\r\n    }\r\n  }, [cart, fullQuantityGoodsCart, dispath]);\r\n\r\n  useEffect(() => {\r\n    if (selCartOpenSt && fullQuantityGoodsCart === 0) dispath(cartOpen(false));\r\n  }, [fullQuantityGoodsCart, selCartOpenSt, dispath]);\r\n\r\n  // cart close in btn-close ===========================================================================\r\n  const hadlerClose = (e: any) => {\r\n    if (catCartRef.current && fullQuantityGoodsCart !== 0) {\r\n      dispath(cartOpen(false));\r\n    }\r\n  };\r\n  // cart close in window ===========================================================================\r\n  useEffect(() => {\r\n    const handleClickOutside = (e: MouseEvent) => {\r\n      const _event = e as MouseEvent & {\r\n        composedPath(): Node[];\r\n      };\r\n      if (\r\n        ![catCartRef.current, iconCartRef?.current].some(\r\n          (x: any) => x && _event.composedPath().includes(x)\r\n        )\r\n      ) {\r\n        dispath(cartOpen(false));\r\n      }\r\n    };\r\n\r\n    document.body.addEventListener('click', handleClickOutside);\r\n\r\n    return () => document.body.removeEventListener('click', handleClickOutside); //unMount- сработает при размонтировании, при ухода со стр! //добавляем удаление обработчика, т.к. при ухода со стр стрый обработчик остается! return - сделай при размонтировании\r\n  }, []);\r\n\r\n  // clickHandler ------------------------------------------------------\r\n  let clickHandler = (e: any) => {\r\n    e.preventDefault();\r\n\r\n    let targ = e.target;\r\n    if (targ.classList.contains('delete-one-position')) {\r\n      dispath(minus(targ.getAttribute('data-key')));\r\n    }\r\n    if (targ.classList.contains('delete-quantity')) {\r\n      dispath(del(targ.getAttribute('data-key')));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {selCartOpenSt && (\r\n        <section\r\n          className=\"main__goods-table-wrapper goods-table\"\r\n          ref={catCartRef}>\r\n          {selCartOpenErrorSt && Object.keys(cart).length ? (\r\n            <div className=\"main__goods-table\" onClick={clickHandler}>\r\n              <div className=\"goods-table__full-goods-block\">\r\n                <ul className=\"goods-table__full-goods\">\r\n                  {Object.keys(cart).map((el: string, i: number) => {\r\n                    const item = goodsReindex[el];\r\n                    return (\r\n                      <li className=\"goods-table__item\" key={item.title + i}>\r\n                        {item.title} - {cart[el]}\r\n                      </li>\r\n                    );\r\n                  })}\r\n                </ul>\r\n                <div className=\"goods-table__clear-cart\">\r\n                  <button\r\n                    onClick={() => dispath(clearCart())}\r\n                    className=\"goods-block__add-to-cart  btn clear-cart\">\r\n                    Clear cart\r\n                  </button>\r\n                </div>\r\n                <div\r\n                  className=\"goods-table__full-goods-close\"\r\n                  onClick={hadlerClose}></div>\r\n              </div>\r\n              <div className=\"cart__full-price\">\r\n                Full price: {fullPrice()} {currency}\r\n              </div>\r\n              <div className=\"goods-table__cart cart\">\r\n                {Object.keys(cart).map((el: string, i: number) => {\r\n                  const item = goodsReindex[el as keyof typeof goodsReindex];\r\n\r\n                  return (\r\n                    <Cart\r\n                      key={item.title + i}\r\n                      title={item.title}\r\n                      cost={\r\n                        !selCostFlag ? item.cost : (item.cost / 95).toFixed(0)\r\n                      }\r\n                      currency={currency}\r\n                      quantity={cart[el]}\r\n                      priceAllItem={\r\n                        !selCostFlag\r\n                          ? Number(item.cost) * cart[el]\r\n                          : Number((item.cost / 95).toFixed(0)) * cart[el] +\r\n                            ' ' +\r\n                            currency\r\n                      }\r\n                      image={item.image}\r\n                      articul={item.articul}\r\n                    />\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <ErrorBeckend />\r\n          )}\r\n        </section>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CartList;\r\n"],"names":["props","_jsxs","className","children","_jsx","title","src","image","alt","cost","currency","quantity","priceAllItem","articul","ErrorBeckend","dispatch","useDispatch","_Fragment","style","onClick","clearCart","CartList","dispath","useAppDispatch","selCartOpenSt","useSelector","selectCartOpenSt","selCartOpenErrorSt","selectCartOpenErrorSt","selCostFlag","selectCostFlag","selectCurrensy","goodsReindex","itemsReindexing","cart","selectCart","catCartRef","useRef","iconCartRef","useContext","iconCartContext","fullQuantityGoodsCart","fullQuantityGoods","useEffect","undefined","fullQuantity","Object","values","reduce","a","b","cartOpen","handleClickOutside","e","_event","current","some","x","composedPath","includes","document","body","addEventListener","removeEventListener","ref","keys","length","preventDefault","targ","target","classList","contains","minus","getAttribute","del","map","el","i","item","fullPrice","fullPriceArr","priceInObj","Number","sum","Cart","toFixed"],"sourceRoot":""}